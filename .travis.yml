language: android
android:
  components:
  - tools
  - platform-tools
env:
  global:
  - secure: bIgCYGbJqQxMD3KvpveVTLdeXOG6Ug8QgwiAjpmQugR5uBmO9UwpJBdZ04mt2UUDEzZHLuCQeGIBrKWkIVMbxc/hA7VTHrT2KB8SZbmoDt1VsmEyHrI4zWozr4ERYq099/Xf+Kz2w0woyNwjJnkZZkGWfXdi4O5qBOEzwsHZfx20Wk9kf4H/6XygDnGmqqPitZ6ogw9dFCKPisoQ+hkHsjWIZzZOHba6LRpaQJ8dF4BgyKyBsSchtBuJ8EnHNOBcq0h5iSA5QAbDEXEdG27ieMW+WVeTfVFVps9VNIb0s9M/Vx1R8sEhcMAV+KByLNfJxWSYsQRZoCPWN3uqI49CTZXnVO7pGNdvC/+T2y/TzRmV8E6xf7mB3cSu5bkU5ictCqMYoJZu06k1eA3bO/YL90w1w2f/WR2lIO/cBUpAeuK4wDUQxQMYNtR/wXZw2CaVKJO2d9Nhmc3rRDkmLFox5445r+cPLGnnSbX5aK9Sfflb1TWqzjABlMBrJDcBPgPd5S/3P+A+hAG+EBE5SDibx/OLeWi+vquue479Xgu4Brutfw1BfekeLm7MaCrzJ05vMWhNbNAk7qTiaybo3WcpSdjy3Uu98BnfaUk3J0xydZDrt0lS1CnTlAmfKI5kAtg4OZlbvuTj9jG+BmOzIybMEbQphtI+1TIWnlqi2UgUIHo=
  - secure: gg23jkbApn7/tnkOLTMi3RfDdklukGZjnHXXnxoC+jJhQ67Y6By0wl5faSDXQaGjxfAtDiCgdPqhifF2cc0UiYYgSb60xdUPTKdVZfpMeuYwev3rr/tk6qqH0TgD8bnY6C+Dcd+ci9Jk9bJWv87kkk+H6OTslaVsn/qPH6Nsidp5glKnb9jvZDSDiopyznPXTuCa5WVTqh9ywqmEnia3QIISFEPcqOu0spzsjq3BLEQic9qUjNA+BQpMQjFK+3qg3hHgY1WubyWsdFnqfq5ncFX0zxT6kuGW9+mNveFOsPTJ+QrKBNPFnlPt4ytU00egesdjwQ8HymP32GBQDROaHJ71FjweialhISINu/S9BXrH64cQfKD2p59bAr4Fh8QICNErEOsOx0Bkvqt6RCN3d5HkOipwDABkeFdd40nt8ogemyjlallA1oBWPu4tUBlM+KwUjYkEoc5rk9qF5PkB4kAD/MqxBjNLwfiucb1nVlfpU38wmTPS2r1VNwzwYpmZqRBmyXDH/FWwyZKU/TksiYkn5rWUv5Oa9SxnSVso0/Dl6D6qVPNoiSfBEc77P8mJJWU9UHhEH7sH73wIZSU8wv0G865P9AVrD6diluvPoE3H8XSeAM/sGzrwquhcd7VYI2FAmoAo47IIGE71qLa3pkVqXkEHL3CwXAULFEZGgw0=
  - secure: pBHmojDHW+6lV9u0hUFi9/05MZpv4FrMhrAqjm7SYR4n8bLTXCFINtZmd6OaBfA4ymcooEa7asq3YcIWOJo4bP/V8AfflAaUeTk4voJ0oyUML2/8IgzORiu5YltJHBs/goV4g7xyT6bKDV1Rc6n4FPxlstH3r8M2b15xCeI/LInok95UVrf5YhZdUNn1awfol5gv7SSMT6V8BnhCMP95R4I+Ap7UuY2RCu3Z9KQp9NwD/Z6e8ykM9xt00927Rovi26kbx/qXZkN4KoUFaVRbOM0tI42+GvigOK/6FPqkmHOgSgem8hHLpFRt0jXV9hwCBjT3ir4iebCS2kTSZ/AGhk4m2Suwz4GVBPsRAdcrg7mVXIPvudfVwhwZCc44wxIsHV2cNz6US7VmQiurMdNf7tuRU/Be1DIlgH4Zr+wHt0qLX/WiAolQ9ddvp7cxJCTt+xEFBKhw3oVw749QD6t3FjDTPlxTi8vAPops2Hpo9Z1mjr8QPbNN8ovqRsS7y0NknLr8cXOQuhXs2hc2eOLyUQbZIaWvo/RFngSK2qhGWqmHUpPrHamK70HzfgfvxZZqnZwhJrsgcrb/d9EjXX/p+kSSNUumU4yRrLd6PstzlD3MExJR/ibVK2kzSQdd9cmHMcdxYUiKbNwvqClh9DAEnG7VHJoSiCGkp/NzI3KxLDA=
before_install:
- export LANG=en_US.UTF-8
- openssl aes-256-cbc -K $encrypted_6f938e004816_key -iv $encrypted_6f938e004816_iv
  -in dm-shield.keystore.enc -out dm-shield.keystore -d
script:
- ionic build cordova android --release
- jarsigner -verbose -sigalg SHA1withRSA -storepass $storepass -keypass $keypass
  -digestalg SHA1 -keystore dm-shield.keystore platforms/android/app/build/outputs/apk/release/app-release-unsigned.apk
  MY_KEYSTORE_ALIAS
- zipalign -v 4 platforms/android/app/build/outputs/apk/release/app-release-unsigned.apk
  platforms/android/app/build/outputs/apk/release/app-release-signed.apk
- supply run -j platforms/android/gapi.json -p com.github.disparter.dm_shield -b platforms/android/app/build/outputs/apk/release/app-release-signed.apk
